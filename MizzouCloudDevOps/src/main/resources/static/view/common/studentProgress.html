<div class="section" ng-controller="MainChartCtrl"  ng-init="getData()">
    <div class="container-fluid">
        <h1 class="display-4">Statistics <span class="h3 text-capitalize d-md-inline d-block">for {{chartsFor}}</span></h1>

        <div class="main_board" >
            <div class="row">
                <div class="col-md-8 col-12 order-md-0 order-1">
                    <div class="jumbotron rounded" >
                        <h1 class="display-6">Students enrollment</h1>
                        <div class="chart-container mt-2" style="position: relative; height:40vh; ">
                            <canvas id="line" class="chart chart-line" chart-data="line.data"
                            chart-labels="line.labels" chart-options="line.options">
                            </canvas>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-12 order-md-1 order-0" >
                    <div class="jumbotron rounded mytable" style="position: relative; height:59vh; ">
                        <h1 class="display-6">Course</h1>
                        <p class="lead font-size-sm">Click on a course name to get the statistics</p>
                        <div ng-show="courseEnrollment" class="table-wrapper-scroll-y my-custom-scrollbar" >
                            <table class='table table-bordered ' style="position: relative; height:20vh;" >
                            <tr class="text-uppercase"><th>Name</th><th>Enrollments</th></tr>
                            <tr class="table-row" ng-click="go($event.currentTarget,'All Courses',0)" id="allCourses"><td>All Courses</td><td class="font-weight-semibold">{{totalEnrollments}}</td></tr>
                            <tr class="table-row" ng-repeat="ai in courseEnrollment" ng-click="go($event.currentTarget,ai.moduleTitle,ai.moduleId)">
                            <td>{{ai.moduleTitle}}</td>
                            <td>{{ai.count}}</td>
                            </tr>
                            </table>
                        </div>
                        <div ng-show="!courseEnrollment" class="col-12 text-center justify-content-center">
                            <img ng-src="/MizzouCloudDevOps/img/loading-t.gif" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" ng-show="moduleId > 0">
                <div class="col-md-6 col-12">
                    <div class="jumbotron rounded">
                        <h1 class="display-6">No. of students based on score</h1>
                        <p class="lead font-size-sm">Hover over the color to view the stats</p>
                        <hr class="my-2">
                        <div ng-show="ranks" class="chart-container" style="position: relative; height:41vh; padding:0; ">
                            <canvas id="pie" class="chart chart-pie px-0"
                            chart-data="pie.data" chart-labels="pie.labels" chart-options="pie.options" chart-colors ="pie.colors">
                            </canvas> 
                        </div>
                        <div ng-show="!ranks" class="col-12 text-center justify-content-center align-middle" style="position: relative; height:40vh; padding:0; text-align: center;  ">
                            <img class="mx-auto d-block" ng-src="/MizzouCloudDevOps/img/loading-t.gif" />
                        </div>
                    </div>
                </div>
                <!-- <div class="col-md-6 col-12">
                    <div class="jumbotron rounded">
                        <h1 class="display-6">Total students in each step</h1>
                        <p class="lead font-size-sm">Hover over the color to view the stats</p>
                        <hr class="my-2">
                        <div ng-show="stepData" class="chart-container">
                            <canvas id="bar" class="chart chart-bar"
                            chart-data="bar.data" chart-labels="bar.labels" chart-series="bar.series" 
                            chart-dataset-override="bar.datasetOverride">
                            </canvas>
                        </div>
                        <div ng-show="!stepData" class="col-12 text-center justify-content-center align-middle" style="position: relative; height:40vh; padding:0; text-align: center;  ">
                            <img class="mx-auto d-block" ng-src="/MizzouCloudDevOps/img/loading-t.gif" />
                        </div>
                    </div>
                </div> -->
                <div class="col-md-6 col-12">
                    <div class="jumbotron rounded" style="min-height:65vh;">
                        <h1 class="display-6">Peer ranking</h1>
                        <hr class="my-2">
                        <div ng-show="ranks" class="my-custom-scrollbar">
                            <table class="table table-hover">
                                <thead>
                                <tr>
                                    <th style="text-align: center;">Rank</th>
                                    <th >Student's Name</th>
                                    <th style="text-align: center;">Score</th>
                                    <th style="text-align: center;">Awards</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-show="ranks == ''"><td colspan=4>No data available</td></tr>
                                <tr ng-repeat="rank in ranks">
                                    <td style="text-align: center;font-size: 20px;" class="rank" >{{$index +1}}</td>
                                    <td class="text-capitalize">{{rank.userName}}</td>
                                    <td class="text-center points">{{rank.points/rank.totalPoints*100}}</td>
                                    <td style="text-align: center;" >

                                            <div ng-show="rank.points/rank.totalPoints*100 >= 90 && rank.points/rank.totalPoints*100 <=100">
                                                <img class="icon_svg_rewards " src="/MizzouCloudDevOps/img/knowledge_level/gold-medal.png " /> &nbsp;
                                                <i  class="icon_rewards fa fa-trophy" style="color: #efc75e;"></i>
                                            </div>

                                            <div ng-show="rank.points/rank.totalPoints*100 >= 70 && rank.points/rank.totalPoints*100 <90"><img class="icon_svg_rewards " src="/MizzouCloudDevOps/img/knowledge_level/silver-medal.png " />
                                                <i  class="icon_rewards fa fa-trophy" style="color: #cdcfcf;"></i>
                                            </div>
                                            
                                            <div ng-show="rank.points/rank.totalPoints*100 >= 50 && rank.points/rank.totalPoints*100 <70"><img class="icon_svg_rewards " src="/MizzouCloudDevOps/img/knowledge_level/bronze-medal.png " />
                                                <i  class="icon_rewards fa fa-trophy" style="color: #ed9d5d;"></i>
                                            </div>
                                    </td>
                                </tr>
                                <!--<tr ng-repeat="rank in ranks|orderBy:'-rank.persentage'" ng-class="{'highlight_rank':rank.user.userId ==userSessionVO.userId}">
                                    <td style="text-align: center;font-size: 20px;" class="rank"  >{{rank.rank}}<small ng-show="rank.rank == '1'">st</small><small ng-show="rank.rank == '2'">nd</small><small ng-show="rank.rank == '3'">rd</small><small ng-show="rank.rank != '1' && rank.rank != '2' && rank.rank != '3'">th</small>
                                    </td>
                                    <td class="username" >{{rank.user.userName}} </td>
                                    <td style="text-align: center;" class="points">
                                        {{rank.persentage}}<small>%</small>
                                    </td>
                                    <td style="text-align: center;" >

                                            <div ng-show="rank.persentage >= 90 && rank.persentage <=100">
                                                <img class="icon_svg_rewards " src="/MizzouCloudDevOps/img/knowledge_level/gold-medal.png " /> &nbsp;
                                                <i  class="icon_rewards fa fa-trophy" style="color: #efc75e;"></i>
                                            </div>

                                            <div ng-show="rank.persentage >= 80 && rank.persentage <90"><img class="icon_svg_rewards " src="/MizzouCloudDevOps/img/knowledge_level/silver-medal.png " />
                                                <i  class="icon_rewards fa fa-trophy" style="color: #cdcfcf;"></i>
                                            </div>
                                            
                                            <div ng-show="rank.persentage >= 70 && rank.persentage <80"><img class="icon_svg_rewards " src="/MizzouCloudDevOps/img/knowledge_level/bronze-medal.png " />
                                                <i  class="icon_rewards fa fa-trophy" style="color: #ed9d5d;"></i>
                                            </div>
                                    </td>
                                </tr>-->
                                
                                </tbody>
                            </table>
                        </div>
                        <div ng-show="!ranks" class="col-12 text-center justify-content-center">
                            <img ng-src="/MizzouCloudDevOps/img/loading-t.gif" />
                        </div>

                    </div>
                </div>
                <div class="col-md-6 col-12" ng-show="false">
                    <div class="jumbotron rounded">
                        <h1 class="display-6">Student averages Course Wise</h1>
                        <p class="lead font-size-sm">This displays only when all courses are selected</p>
                        <hr class="my-2">
                        <div ng-show="courseEnrollment" class="table-wrapper-scroll-y my-custom-scrollbar">
                            <table class="table table-striped table-border-solid">
                                <thead>
                                    <tr>
                                        <th>Course Name</th>
                                        <th>Highest</th>
                                        <th>Least</th>
                                        <th>Average</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="course in courseEnrollment">
                                        <td scope="row" class="font-weight-semibold">{{course.moduleTitle}}</td>
                                        <td>NA</td>
                                        <td>NA</td>
                                        <td>NA</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                    </div>
                </div>
                <div class="col-md-4 col-12">
                    <div class="jumbotron rounded">
                        <h1 class="display-6">Student averages</h1>
                        <p class="lead font-size-sm">This displays only when a particular course is selected</p>
                        <hr class="my-2">
                        <div ng-show="ranks">
                            <div class="row">
                                <div class="col-6">Assessment Completed</div>
                                <div class="col-6">: <span ng-if="assestmentCompleted > 0">{{assestmentCompleted}}</span></div>
                            </div>
                            <div class="row">
                                <div class="col-6">Highest Score</div>
                                <div class="col-6">: <span ng-if="assestmentCompleted > 0">{{highPoints}}</span></div>
                            </div>
                            <div class="row">
                                <div class="col-6">Average Score</div>
                                <div class="col-6">: <span ng-if="assestmentCompleted > 0">{{courseAvg}}</span></div>
                            </div>
                            <div class="row">
                                <div class="col-6">Least Score</div>
                                <div class="col-6">: <span ng-if="assestmentCompleted > 0"> {{lowPoints}}</span></div>
                            </div>
                        </div>
                        <div ng-show="!ranks" class="col-12 text-center justify-content-center">
                            <img ng-src="/MizzouCloudDevOps/img/loading-t.gif" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<hr>
<!--
<div class="" ng-controller="BarCtrl">
    <div class="row inst_dashboard">
        <div class="col-md-12 ">
            <div class="row inst_dashboard_icon">
                <div class="col-md-2" style="text-align: center; ">
                    <img class="icon_svg " src=" /CyberRange/img/icon_svg/students.svg " />

                    <p>Total Students
                        <br> <b style="font-size: 20px; ">30</b>
                    </p>

                </div>
                <div class="col-md-2 " style="text-align: center; ">

                    <img class="icon_svg " src="/CyberRange/img/icon_svg/ddos.svg " />
                    <p>Students enrolled in Lab 2
                        <br> <b style="font-size: 20px; ">20</b>
                    </p>

                </div>
                <div class="col-md-2 " style="text-align: center; ">

                    <img class="icon_svg " src="/CyberRange/img/icon_svg/APT.svg " />
                    <p>Students enrolled in Lab 3
                        <br> <b style="font-size: 20px; ">20</b>
                    </p>

                </div>
                <div class="col-md-2 " style="text-align: center; ">

                    <img class="icon_svg " src="/CyberRange/img/icon_svg/crypto.svg " />
                    <p>Students enrolled in Lab 3
                        <br> <b style="font-size: 20px; ">20</b>
                    </p>

                </div>

                <div class="col-md-2 " style="text-align: center; ">
                    <img class="icon_svg " src="/CyberRange/img/icon_svg/enrollment.svg " />

                    <p>Total enrollments
                        <br> <b style="font-size: 20px; ">30</b>
                    </p>

                </div>
            </div>
        </div>
        <div class="col-md-4 title-blue ">Top 10 Learners</div>

        <div class="col-md-4 title-dark-blue ">Student's Level after Assessment</div>
        <div class="col-md-4 title-blue ">10 Most Recent Completion</div>

        <div class="col-md-4">
            <div class="graph_student ">

                <canvas id="base" class="chart-horizontal-bar" chart-data="data1" chart-labels="labels1" chart-colors="colors">
                </canvas>
                
            </div>
        </div>

        <div class="col-md-4 ">
            <div class="graph_student ">
                <canvas id="bar " class="chart chart-bar " chart-data="data " chart-labels="labels " chart-series="series ">
                </canvas>
            </div>
        </div>

        <div class="col-md-4 ">
            <div class="graph_student ">

                <canvas id="base" class="chart-horizontal-bar" chart-data="data1" chart-labels="labels1">
                </canvas>
            </div>
        </div>
                <div class="col-md-12 title-dark-blue ">Top 10 Students</div>
        
		<div class="col-md-12 ">
			
			<div class="row">
				<div class="col-md-2 top-10-div" ng-repeat="i in [1,2,3,4,5,6]" style="text-align: center;">
					<img class="top-10" ng-src="https://avatars2.githubusercontent.com/u/47259148?v=4" class="rounded-circle mr-2" height="34" alt="" src="https://avatars2.githubusercontent.com/u/47259148?v=4">
					<br/>Tom Student 
				</div>
				
			</div>
        </div>

    </div>
</div>
-->
<style>
.table-row{
cursor:pointer;
}
.my-custom-scrollbar {
position: relative;
height: 500px;
overflow: auto;
}
.table-wrapper-scroll-y {
display: block;
}
</style>
