<!DOCTYPE html>
<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Chapter5</title>


  <style type="text/css">
    body {
      font-family: Helvetica, arial, sans-serif;
      font-size: 14px;
      line-height: 1.6;
      /* padding-top: 10px;
    padding-bottom: 10px; */
      background-color: white;
      /* padding: 30px; */
    }

    /* Style buttons */
    .copyButton {
      right: 70px;
      position: absolute;
      /*positioned relative to its parent element*/
      background-color: none;
      border: none;
      /* Remove borders */
      color: black;
      /*  text */
      font-size: 22px;
      /* Set a font size */
      padding: 0;
      cursor: pointer;
      /* Mouse pointer on hover */
      background-position-x: 8px;
      background-position-y: 6px;
    }

    .yamlTag {
      right: 70px;
      position: absolute;
      /*positioned relative to its parent element*/
      background-color: none;
      color: grey;
      /*  text */
      font-size: 18px;
      /* Set a font size */
      padding: 0;
      margin-top: -4px;
      cursor: auto;
      /* Mouse pointer on hover */
      background-position-x: 8px;
      background-position-y: 6px;
    }

    /* Darker background on mouse-over */
    .copyButton:hover {
      background-color: #CACFD2;
    }

    body>*:first-child {
      margin-top: 0 !important;
    }

    body>*:last-child {
      margin-bottom: 0 !important;
    }

    a {
      color: #4183C4;
    }

    a.absent {
      color: #cc0000;
    }

    a.anchor {
      display: block;
      padding-left: 30px;
      margin-left: -30px;
      cursor: pointer;
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      margin: 20px 0 10px;
      padding: 0;
      font-weight: bold;
      -webkit-font-smoothing: antialiased;
      cursor: text;
      position: relative;
    }

    h1:hover a.anchor,
    h2:hover a.anchor,
    h3:hover a.anchor,
    h4:hover a.anchor,
    h5:hover a.anchor,
    h6:hover a.anchor {
      background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
      text-decoration: none;
    }

    h1 tt,
    h1 code {
      font-size: inherit;
    }

    h2 tt,
    h2 code {
      font-size: inherit;
    }

    h3 tt,
    h3 code {
      font-size: inherit;
    }

    h4 tt,
    h4 code {
      font-size: inherit;
    }

    h5 tt,
    h5 code {
      font-size: inherit;
    }

    h6 tt,
    h6 code {
      font-size: inherit;
    }

    h1 {
      font-size: 28px;
      color: black;
    }

    h2 {
      font-size: 24px;
      border-bottom: 1px solid #cccccc;
      color: black;
    }

    h3 {
      font-size: 18px;
    }

    h4 {
      font-size: 16px;
    }

    h5 {
      font-size: 14px;
    }

    h6 {
      color: #777777;
      font-size: 14px;
    }

    p,
    blockquote,
    ul,
    ol,
    dl,
    li,
    table,
    pre {
      margin: 15px 0;
    }

    hr {
      background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
      border: 0 none;
      color: #cccccc;
      height: 4px;
      padding: 0;
    }

    body>h2:first-child {
      margin-top: 0;
      padding-top: 0;
    }

    body>h1:first-child {
      margin-top: 0;
      padding-top: 0;
    }

    body>h1:first-child+h2 {
      margin-top: 0;
      padding-top: 0;
    }

    body>h3:first-child,
    body>h4:first-child,
    body>h5:first-child,
    body>h6:first-child {
      margin-top: 0;
      padding-top: 0;
    }

    a:first-child h1,
    a:first-child h2,
    a:first-child h3,
    a:first-child h4,
    a:first-child h5,
    a:first-child h6 {
      margin-top: 0;
      padding-top: 0;
    }

    h1 p,
    h2 p,
    h3 p,
    h4 p,
    h5 p,
    h6 p {
      margin-top: 0;
    }

    li p.first {
      display: inline-block;
    }

    li {
      margin: 0;
    }

    ul,
    ol {
      padding-left: 30px;
    }

    ul :first-child,
    ol :first-child {
      margin-top: 0;
    }

    dl {
      padding: 0;
    }

    dl dt {
      font-size: 14px;
      font-weight: bold;
      font-style: italic;
      padding: 0;
      margin: 15px 0 5px;
    }

    dl dt:first-child {
      padding: 0;
    }

    dl dt> :first-child {
      margin-top: 0;
    }

    dl dt> :last-child {
      margin-bottom: 0;
    }

    dl dd {
      margin: 0 0 15px;
      padding: 0 15px;
    }

    dl dd> :first-child {
      margin-top: 0;
    }

    dl dd> :last-child {
      margin-bottom: 0;
    }

    blockquote {
      border-left: 4px solid #dddddd;
      padding: 0 15px;
      color: #777777;
    }

    blockquote> :first-child {
      margin-top: 0;
    }

    blockquote> :last-child {
      margin-bottom: 0;
    }

    table {
      padding: 0;
      border-collapse: collapse;
    }

    table tr {
      border-top: 1px solid #cccccc;
      background-color: white;
      margin: 0;
      padding: 0;
    }

    table tr:nth-child(2n) {
      background-color: #f8f8f8;
    }

    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px;
    }

    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px;
    }

    table tr th :first-child,
    table tr td :first-child {
      margin-top: 0;
    }

    table tr th :last-child,
    table tr td :last-child {
      margin-bottom: 0;
    }

    /* img {
    max-width: 100%; } */

    span.frame {
      display: block;
      overflow: hidden;
    }

    span.frame>span {
      border: 1px solid #dddddd;
      display: block;
      float: left;
      overflow: hidden;
      margin: 13px 0 0;
      padding: 7px;
      width: auto;
    }

    span.frame span img {
      display: block;
      float: left;
    }

    span.frame span span {
      clear: both;
      color: #333333;
      display: block;
      padding: 5px 0 0;
    }

    span.align-center {
      display: block;
      overflow: hidden;
      clear: both;
    }

    span.align-center>span {
      display: block;
      overflow: hidden;
      margin: 13px auto 0;
      text-align: center;
    }

    span.align-center span img {
      margin: 0 auto;
      text-align: center;
    }

    span.align-right {
      display: block;
      overflow: hidden;
      clear: both;
    }

    span.align-right>span {
      display: block;
      overflow: hidden;
      margin: 13px 0 0;
      text-align: right;
    }

    span.align-right span img {
      margin: 0;
      text-align: right;
    }

    span.float-left {
      display: block;
      margin-right: 13px;
      overflow: hidden;
      float: left;
    }

    span.float-left span {
      margin: 13px 0 0;
    }

    span.float-right {
      display: block;
      margin-left: 13px;
      overflow: hidden;
      float: right;
    }

    span.float-right>span {
      display: block;
      overflow: hidden;
      margin: 13px auto 0;
      text-align: right;
    }

    code,
    tt {
      margin: 0 2px;
      padding: 0 5px;
      white-space: nowrap;
      border: 1px solid #eaeaea;
      background-color: #f8f8f8;
      border-radius: 3px;
    }

    pre code {
      margin: 0;
      padding: 0;
      white-space: pre;
      border: none;
      background: transparent;
    }

    .highlight pre {
      background-color: #f8f8f8;
      border: 1px solid #cccccc;
      font-size: 13px;
      line-height: 19px;
      overflow: auto;
      padding: 6px 10px;
      border-radius: 3px;
    }

    pre {
      background-color: #f8f8f8;
      border: 1px solid #cccccc;
      font-size: 13px;
      line-height: 19px;
      overflow: auto;
      padding: 6px 10px;
      border-radius: 3px;
    }

    pre code,
    pre tt {
      background-color: transparent;
      border: none;
    }

    sup {
      font-size: 0.83em;
      vertical-align: super;
      line-height: 0;
    }

    kbd {
      display: inline-block;
      padding: 3px 5px;
      font-size: 11px;
      line-height: 10px;
      color: #555;
      vertical-align: middle;
      background-color: #fcfcfc;
      border: solid 1px #ccc;
      border-bottom-color: #bbb;
      border-radius: 3px;
      box-shadow: inset 0 -1px 0 #bbb
    }

    * {
      -webkit-print-color-adjust: exact;
    }

    /* @media screen and (min-width: 914px) {
      body {
          width: 854px;
          margin:0 auto;
      }
  } */
    @media print {

      table,
      pre {
        page-break-inside: avoid;
      }

      pre {
        word-wrap: break-word;
      }

      body {
        padding: 2cm;
      }
    }
  </style>

  <style type="text/css">
    /**
   * prism.js default theme for JavaScript, CSS and HTML
   * Based on dabblet (http://dabblet.com)
   * @author Lea Verou
   */

    code[class*="language-"],
    pre[class*="language-"] {
      color: black;
      background: none;
      text-shadow: 0 1px white;
      font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
      text-align: left;
      white-space: pre;
      word-spacing: normal;
      word-break: normal;
      word-wrap: normal;
      line-height: 1.5;

      -moz-tab-size: 4;
      -o-tab-size: 4;
      tab-size: 4;

      -webkit-hyphens: none;
      -moz-hyphens: none;
      -ms-hyphens: none;
      hyphens: none;
    }

    pre[class*="language-"]::-moz-selection,
    pre[class*="language-"] ::-moz-selection,
    code[class*="language-"]::-moz-selection,
    code[class*="language-"] ::-moz-selection {
      text-shadow: none;
      background: #b3d4fc;
    }

    pre[class*="language-"]::selection,
    pre[class*="language-"] ::selection,
    code[class*="language-"]::selection,
    code[class*="language-"] ::selection {
      text-shadow: none;
      background: #b3d4fc;
    }

    @media print {

      code[class*="language-"],
      pre[class*="language-"] {
        text-shadow: none;
      }
    }

    /* Code blocks */
    pre[class*="language-"] {
      padding: 1em;
      margin: .5em 0;
      overflow: auto;
    }

    :not(pre)>code[class*="language-"],
    pre[class*="language-"] {
      background: #f5f2f0;
    }

    /* Inline code */
    :not(pre)>code[class*="language-"] {
      padding: .1em;
      border-radius: .3em;
      white-space: normal;
    }

    .token.comment,
    .token.prolog,
    .token.doctype,
    .token.cdata {
      color: slategray;
    }

    .token.punctuation {
      color: #999;
    }

    .namespace {
      opacity: .7;
    }

    .token.property,
    .token.tag,
    .token.boolean,
    .token.number,
    .token.constant,
    .token.symbol,
    .token.deleted {
      color: #905;
    }

    .token.selector,
    .token.attr-name,
    .token.string,
    .token.char,
    .token.builtin,
    .token.inserted {
      color: #690;
    }

    .token.operator,
    .token.entity,
    .token.url,
    .language-css .token.string,
    .style .token.string {
      color: #a67f59;
      background: hsla(0, 0%, 100%, .5);
    }

    .token.atrule,
    .token.attr-value,
    .token.keyword {
      color: #07a;
    }

    .token.function {
      color: #DD4A68;
    }

    .token.regex,
    .token.important,
    .token.variable {
      color: #e90;
    }

    .token.important,
    .token.bold {
      font-weight: bold;
    }

    .token.italic {
      font-style: italic;
    }

    .token.entity {
      cursor: help;
    }
  </style>

  <style type="text/css">
    div.prism-show-language {
      position: relative;
    }

    div.prism-show-language>div.prism-show-language-label {
      color: black;
      background-color: #CFCFCF;
      display: inline-block;
      position: absolute;
      bottom: auto;
      left: auto;
      top: 0;
      right: 0;
      width: auto;
      height: auto;
      font-size: 0.9em;
      border-radius: 0 0 0 5px;
      padding: 0 0.5em;
      text-shadow: none;
      z-index: 1;
      -webkit-box-shadow: none;
      -moz-box-shadow: none;
      box-shadow: none;
      -webkit-transform: none;
      -moz-transform: none;
      -ms-transform: none;
      -o-transform: none;
      transform: none;
    }
  </style>


</head>

<body>

  <h1 id="toc_0"><strong>Chapter 5 - Use Case application on Bioinformatics</strong></h1>

  <p>In this chapter, you will run our example application – a Volunteer Edge Computing with Trusted Bioinformatics
    application. You will use the AWS EC2 instances that you have created in the K3S setup steps, run the application on
    a specified node, and see how the application helps you to run Bioinformatics workflows within the K3S cluster. K3S
    assumes you to have edge computing nodes to run your computation on the edge. But for the simplicity of the lab
    purpose, you will use the edge nodes in your AWS account to mimic edge nodes. In a real-world scenario, you can
    create the Edge nodes on any edge computing resources located on your side, register your Edge nodes to the Cloud
    node, and run your workflow in the K3S cluster.</p>

  <h2 id="toc_1">5.1 Application Background</h2>

  <p>Our Volunteer Edge Computing application leverages a cloud resource broker named OnTimeURB (Web Link: <a
      href="www.ontimeurb.net">On-TimeURB</a>), which stands for On Time Universal Resource Broker. OnTimeURB framework
    is created for configuring cloud infrastructure for scientific/Bioinformatics workflows. It enables researchers
    better identifying and utilizing compute resources available in local servers as well as resources available on
    public cloud platforms. It enables researchers flexibility in creating hybrid cyber infrastructure for their
    applications requirements, thus reducing the
    computing time for their workflow execution.</p>

  <p>OnTimeURB is designed for a large spectrum of researchers. It has multiple advantages:
  <ul>
    <li>It is ideal for researchers from small-scale lab, which do not have enough in-house computing resources but
      wish to use public or community cloud resources optionally.</li>

    <li>Large-scale cyber infrastructure engineers can leverage multiple clouds simultaneously to create large clusters
      of machine for analyzing big data ( 100Gbs).</li>

    <li>Optimal resource allocations/recommendations depending on user requirements of performance, agility, cost
      and security (PACS).</li>

    <li>It is compatible with workflows created from Pegasus workflow management system.</p>
    </li>
  </ul>

  <p>OnTimeURB integrates multiple components to identify and submitting large workflow on cloud computing
    infrasturcture.
    The most significant ones include the Pegasus Workflow Management System (Web Link: <a
      href="www.pegasus.isi.edu">Pegasus</a>), HTCondor high throughput workload manager (Web Link: <a
      href="www.research.cs.wisc.edu/htcondor/index.html">HTCondor</a>), and Pyglidein, a python server-client pair for
    submitting HTCondor glidein jobs on remote batch systems (Web Link: <a
      href="www.github.com/WIPACrepo/pyglidein">pyglidein</a>). The diagram below shows how the entire system works:
    pyglidein is used to run glideins on remote sites, adjusting for pool demand automatically. It consists of a server
    running on the central HTCondor submit machine and a number of clients on remote
    submit machines. The client will submit glideins which connect back to the central HTCondor machine and advertise
    slots for jobs to run in. Jobs will then run as normal.</p>

  <p>
    <center><img src="/MizzouCloudDevOps/img/lab3/PyGlidein.png" width=600></center>
  </p>

  <p>In this lab exercise, we will utilize a part of the OnTimeURB framework, and show how we could leverage the
    K3S system to submit Bioinformatics job to the desired worker node.</p>

  <h2 id="toc_2">5.2 PGen Bioinformatics workflow</h2>

  <p>In this section, your will submit and run a Bioinformatics workflow, PGEN workflow, within the K3S cluster. PGen
    workflow (Web Link:<a
      href="https://github.com/wangso/OnTimeURB/tree/master/Docker_containers/Bioinformatics_Workflows/PGen"> PGen
      Bioinformatics Workflow </a>) is used to efficiently facilitate large-scale next generation sequencing (NGS) data
    analysis to identify genomic variations. The workflow allows users to identify single nucleotide polymorphisms
    (SNPs) and insertion-deletions (Indels), perform SNP annotation and conduct copy number variation (CNV) analyses on
    multiple resequencing datasets. PGen workflow is developed using many widely
    accepted open-source NGS tools for alignment of reads, variants calling, variants filtration, VCF merging and
    others. The workflow starts by aligning either paired-end or single-end FASTQ reads against the organisms reference
    genome using BWA. Picard Tools is also used at this step to locate duplicate molecules and assign all reads into
    groups with the default parameters. After alignment, SNPs and Indels are called using the Haplotype Caller algorithm
    from Genome Analysis Toolkit (GATK). Filtering criteria are defined in INFO filed in vcf file, where QD stands for
    quality by depth, FS is Fisher strand values and MQ is mapping quality of variants. Detected variants were then
    filtered using criteria QD &lt; 26.0 || FS &gt; 60.0 || MQ &lt; 40.0 for SNPs and DQ &lt; 26.0 || FS &gt; 200.0 ||
    MQ &lt; 40.0 for indels. Custom criteria can also be applied by the user. Outputs are generated as BAM and VCF
    standard formats. In the filtering step, only the SNPs and Indels are considered; however other types of variants
    can extracted from the generated unfiltered files.</p>

  <p>We have pre-built the Docker container image for the PGen workflow, which can be accessed at <a
      href="https://hub.docker.com/repository/docker/mizzouceri/fastqc_wf">fastqc_wf</a>.</p>

  <p>In this lab, we will configure K3S Pod to automatically download this Docker image to the specified Edge node that
    we will run the PGen workflow on. The downloading process will take several minutes when its the first time the Pod
    runs the PGen workflow. After the first running, the Docker image will be cached on the same node, and thus it will
    take much shorter time to initialize a pod to run the same container.</p>

  <h2 id="toc_3">5.3 Deploy the application in your K3S cluster</h2>
  <p>We have a git repo with the required manifest file to deploy the PGen workflow. Clone the repo using the following
    command:</p>
<div><pre><button ng-click="copyToClipboard('5-2')" type="button" class="copyButton"><i class="fa fa-files-o"></i></button><code class="language-bash">$ git clone https://github.com/sakred13/k3s-bioinformatics-demo.git</code><code id = "5-2" hidden>git clone https://github.com/sakred13/k3s-bioinformatics-demo.git</code></pre></div>

  <p>You will need to use the Kubernetes manifest file that we have prepared for this lab to submit and run the PGen
    Bioinformatic workflow. The manifest file defines a Kubernetes Deployment that deploys the PGen container to run in
    a Pod on a specific Node in your K3S cluster.</p>

  <h3 id="toc_4">5.3.1 Examine the manifest file</h3>

  <p>From your Cloud node terminal, run the following commands to examine the manifest file that defines your Kubernetes
    deployment configuration.</p>

<div><pre><button ng-click="copyToClipboard('5-3')" type="button" class="copyButton"><i class="fa fa-files-o"></i></button><code class="language-bash">$ cd k3s-bioinformatics-demo/
$ cat fastqc-deployment.yaml</code><code id = "5-3" hidden>cd k3s-bioinformatics-demo/
cat fastqc-deployment.yaml</code></pre>
</div>
  <div>

  <p>Output:</p>

<div><pre><p class="yamlTag">YAML</p><code class="language-bash">apiVersion: apps/v1
kind: Deployment
metadata:
    name: fastqc
    labels:
        app: fastqc
        tier: server
spec:
    replicas: 1
    selector:
        matchLabels:
            app: fastqc
            tier: server
    template:
        metadata:
            labels:
                app: fastqc
                tier: server
        spec:
            nodeSelector:
                kubernetes.io/hostname: Name-of-Your-Node
            containers:
                - name: fastqc
                image: mizzouceri/fastqc_wf:V1
                securityContext:
                    allowPrivilegeEscalation: true
                command: [&quot;/bin/bash&quot;, &quot;-c&quot;]
                args: [&quot;service ssh start; . ~/condor-8.8.9/condor.sh; ~/condor-8.8.9/condor_master; .
                ~/pegasus-source/script1.sh; sleep 1000&quot;]

                imagePullPolicy: Always
                ports:
                    - containerPort: 22
                    hostPort: 20
                volumeMounts:
                    - name: output
                    mountPath: ~/output
        restartPolicy: Always
        volumes:
            - name: output
            hostPath:
                path: /output</code></pre>
  </div>

  <p>In the above configuration, you define to run a Deployment with one Pod running the Docker container, which will be
    created from the image “mizzouceri/fastqc_wf:V1” hosted in DockerHub. The image will be first downloaded when you
    first run it on the node and then saved for later runs. You define where to run the pod by specifying the
    “nodeSelector” to use the the node with the defined name.</p>

  <p>
  <blockquote
    style="background-color: #e5f5e0 ; margin: 0 ; font-family: calibri;border: 2px solid #00441b; border-left: 6px solid #00441b; padding : 0.5em; border-radius: 8px; background-style:discrete">
    <font size=3 color=green> <b> Note: </b></font>
    <font color="black">
      You will need to replace the “Name<em>of</em>your_Node” with the actual name of the node you want to run your
      workflow.
  </blockquote>
  </font>
  </p>

  <p>The name of the nodes can be retrieved by running the following command:</p>

<div><pre><button ng-click="copyToClipboard('5-5')" type="button" class="copyButton"><i class="fa fa-files-o"></i></button><code class="language-bash">$ kubectl get nodes</code><code id = "5-5" hidden>kubectl get nodes -a</code></pre></div>

  <p>The string in the “NAME” column will be the name to use in the manifest file. For example, I can use</p>

<div><pre><p class="yamlTag">YAML</p><code class="language-bash">nodeSelector:
kubernetes.io/hostname: edge1</code><code id = "5-6" hidden>nodeSelector:
        kubernetes.io/hostname: edge1</code></pre>
</div>

  <h3 id="toc_5">5.3.2 Create deployments for example workflow</h3>

  <p>Once you are done modifiying the manifest file, from your Cloud node terminal, run the following commands:</p>

<div><pre><button ng-click="copyToClipboard('5-7')" type="button" class="copyButton"><i class="fa fa-files-o"></i></button><code class="language-bash">$ kubectl apply -f fastqc-deployment.yaml</code><code id = "5-7" hidden>kubectl apply -f fastqc-deployment.yaml</code></pre></div>

  <p>Once you see that the Deployment has been created, your Pod has been created and submitted to the node you
    specified in the manifest file.</p>
  <p>You can also check the status of your deployment:  </p>
<div><pre><button ng-click="copyToClipboard('5-7.1')" type="button" class="copyButton"><i class="fa fa-files-o"></i></button><code class="language-bash">$ kubectl get deployments</code><code id = "5-7.1" hidden>kubectl get deployments</code></pre></div>

  <p>You can also check your Pod:</p>

<div><pre><button ng-click="copyToClipboard('5-8')" type="button" class="copyButton"><i class="fa fa-files-o"></i></button><code class="language-bash">$ kubectl get pods</code><code id = "5-8" hidden>kubectl get pods</code></pre></div>

  <p>
    <center><img src="/MizzouCloudDevOps/img/lab3/deployment.png" width=700></center>
  </p>

  <p>At the beginning, you will see that the status of your Pod is “Container Creating”, meaning that your cluster is
    deploying the Pod by first downloading the Docker image and then creating Docker container from it.</p>

    <p>As pulling the image takes at least 5 minutes, you can watch its deployment status using the below command:</p>

<div><pre><button ng-click="copyToClipboard('5-7.2')" type="button" class="copyButton"><i class="fa fa-files-o"></i></button><code class="language-bash">$ watch kubectl get deployments</code><code id = "5-7.2" hidden>watch kubectl get pods</code></pre></div>

  <p>At the same time, you can check the details of your Pod (replace the “{nameofyour_pod}” with the name of
    your
    Pod).:</p>

<div><pre><button ng-click="copyToClipboard('5-9')" type="button" class="copyButton"><i class="fa fa-files-o"></i></button><code class="language-bash">$ kubectl describe pod {nameofyour_pod}</code><code id = "5-9" hidden>kubectl describe pod</code></pre></div>

  <p>
    <center><img src="/MizzouCloudDevOps/img/lab3/fastqc-2.png" width=700></center>
  </p>

  <p>After a few minutes (this takes a while since the Docker image is really large, &gt;6GB), you will see that your
    Pod is up and running.</p>

  <h3 id="toc_6">5.3.3 Check the status and output of the workflow</h3>

  <p>One you see that the status of the Pod has changed to “Running”, then the Pod is running on your specified node,
    and the use case workflow has started running.</p>

  <p>Go to your edge node on which you have assigned your Pod and workflow, and check the status of the workflow:</p>

<div><pre><button ng-click="copyToClipboard('5-10')" type="button" class="copyButton"><i class="fa fa-files-o"></i></button><code class="language-bash">$ kubectl get pods</code><code id = "5-10" hidden>kubectl get pods</code></pre></div>

  <p>Copy your Pod ID, and then:</p>

<div><pre><button ng-click="copyToClipboard('5-11')" type="button" class="copyButton"><i class="fa fa-files-o"></i></button><code class="language-bash">$ kubectl logs Your_Pod_ID</code><code id = "5-11" hidden>kubectl logs Your_Pod_ID</code></pre></div>

  <p>You will see that the workflow has been created and submitted through Pegasus workflow manager, similar to the
    screenshot below:</p>

  <p>
    <center><img src="/MizzouCloudDevOps/img/lab3/fastqc-3.png" width=700></center>
  </p>

  <p>The workflow will take a few minutes to finish. During this running time, you can keep checking the progress of the
    workflow by using a simple script file that we have prepared.</p>

<div><pre><button ng-click="copyToClipboard('5-12')" type="button" class="copyButton"><i class="fa fa-files-o"></i></button><code class="language-bash">$ bash ./checkStatus.sh 
</code><code id = "5-12" hidden>bash ./checkStatus.sh </code></pre>
</div>

  <p>You will see the output similar to this:</p>

  <p>
    <center><img src="/MizzouCloudDevOps/img/lab3/workflow-8.png" width=700></center>
  </p>

  <p>When the workflow has completed, you will see the output that has a summary of the running time in it:</p>

  <p>
    <center><img src="/MizzouCloudDevOps/img/lab3/workflow-10.png" width=700></center>
  </p>

  <p>You can also see the details of the workflow from the mapped local volume on the Edge node by going to
    “/output/Your<em>Job</em>Id” directory.</p>

  <h3 id="toc_7">5.3.4 Performance comparison</h3>

  <p>In this lab, we asked you to create two Edge nodes with different computing power. The larger machine has 2 CPUs, 8
    GB of memory, while the smaller machine has 1 CPU and 1 GB of memory. In this simple use case application, you can
    run the workflow on both Edge nodes, and see if the workflow will be run at different speed.</p>

  <p>Remove your previous deployment by running the following command on your Cloud node:</p>

<div><pre><button ng-click="copyToClipboard('5-13')" type="button" class="copyButton"><i class="fa fa-files-o"></i></button><code class="language-bash">$ kubectl delete -f fastqc-deployment.yaml</code><code id = "5-13" hidden>kubectl delete -f fastqc-deployment.yaml</code></pre></div>

  <p>Repeat the previous section (Section 5.3) by changing the “nodeSelector:” field with the host name of your second
    Edge node. That is, if you used “edge1” before, now change it to “edge2”, and vice versa. For example, you can change it to edge2 as follows:</p>

<div><pre><p class="yamlTag">YAML</p><code class="language-bash">nodeSelector:
  kubernetes.io/hostname: edge2</code><code id = "5-13.1" hidden>nodeSelector:
          kubernetes.io/hostname: edge2</code></pre>
  </div>
  <p>Then create a new Deployment:</p>

<div><pre><button ng-click="copyToClipboard('5-14')" type="button" class="copyButton"><i class="fa fa-files-o"></i></button><code class="language-bash">$ kubectl apply -f fastqc-deployment.yaml</code><code id = "5-14" hidden>kubectl apply -f fastqc-deployment.yaml</code></pre></div>

  <p>Repeat the previous section to monitor the progress of the workflow, and at the end check the Workflow wall time.
    In the previous section, I have used the small Edge node first, and got a running time of the 2 mins and 11 secs.
    Below I show the result of running the workflow on a bigger machine machine (T2.large type EC2 instance):</p>

<div><pre><button ng-click="copyToClipboard('5-14.1')" type="button" class="copyButton"><i class="fa fa-files-o"></i></button><code class="language-bash">$ bash ./checkStatus.sh 
</code><code id = "5-14.1" hidden>bash ./checkStatus.sh </code></pre>
</div>
  <p>
    <center><img src="/MizzouCloudDevOps/img/lab3/workflow-11.png" width=700></center>
  </p>

  <p>Can you tell if there is any difference in processing time?</p>

  <h2 id="toc_0"><strong>5.4 Clean up your lab resources</strong></h2>

  <p>Once you have completed the lab, please terminate the EC2 instance that you created for this lab.</p>

  <p>
    <font color=blue>Congratulations!</font> You have successfully deployed a K3S cluster and run our example
    bioinformatics workflow using the edge nodes on AWS.
  </p>



  <script type="text/javascript">
    var _self = "undefined" != typeof window ? window : "undefined" != typeof WorkerGlobalScope && self instanceof WorkerGlobalScope ? self : {}, Prism = function () { var e = /\blang(?:uage)?-(\w+)\b/i, t = 0, n = _self.Prism = { util: { encode: function (e) { return e instanceof a ? new a(e.type, n.util.encode(e.content), e.alias) : "Array" === n.util.type(e) ? e.map(n.util.encode) : e.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/\u00a0/g, " ") }, type: function (e) { return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1] }, objId: function (e) { return e.__id || Object.defineProperty(e, "__id", { value: ++t }), e.__id }, clone: function (e) { var t = n.util.type(e); switch (t) { case "Object": var a = {}; for (var r in e) e.hasOwnProperty(r) && (a[r] = n.util.clone(e[r])); return a; case "Array": return e.map && e.map(function (e) { return n.util.clone(e) }) }return e } }, languages: { extend: function (e, t) { var a = n.util.clone(n.languages[e]); for (var r in t) a[r] = t[r]; return a }, insertBefore: function (e, t, a, r) { r = r || n.languages; var l = r[e]; if (2 == arguments.length) { a = arguments[1]; for (var i in a) a.hasOwnProperty(i) && (l[i] = a[i]); return l } var o = {}; for (var s in l) if (l.hasOwnProperty(s)) { if (s == t) for (var i in a) a.hasOwnProperty(i) && (o[i] = a[i]); o[s] = l[s] } return n.languages.DFS(n.languages, function (t, n) { n === r[e] && t != e && (this[t] = o) }), r[e] = o }, DFS: function (e, t, a, r) { r = r || {}; for (var l in e) e.hasOwnProperty(l) && (t.call(e, l, e[l], a || l), "Object" !== n.util.type(e[l]) || r[n.util.objId(e[l])] ? "Array" !== n.util.type(e[l]) || r[n.util.objId(e[l])] || (r[n.util.objId(e[l])] = !0, n.languages.DFS(e[l], t, l, r)) : (r[n.util.objId(e[l])] = !0, n.languages.DFS(e[l], t, null, r))) } }, plugins: {}, highlightAll: function (e, t) { var a = { callback: t, selector: 'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code' }; n.hooks.run("before-highlightall", a); for (var r, l = a.elements || document.querySelectorAll(a.selector), i = 0; r = l[i++];)n.highlightElement(r, e === !0, a.callback) }, highlightElement: function (t, a, r) { for (var l, i, o = t; o && !e.test(o.className);)o = o.parentNode; o && (l = (o.className.match(e) || [, ""])[1], i = n.languages[l]), t.className = t.className.replace(e, "").replace(/\s+/g, " ") + " language-" + l, o = t.parentNode, /pre/i.test(o.nodeName) && (o.className = o.className.replace(e, "").replace(/\s+/g, " ") + " language-" + l); var s = t.textContent, u = { element: t, language: l, grammar: i, code: s }; if (!s || !i) return n.hooks.run("complete", u), void 0; if (n.hooks.run("before-highlight", u), a && _self.Worker) { var c = new Worker(n.filename); c.onmessage = function (e) { u.highlightedCode = e.data, n.hooks.run("before-insert", u), u.element.innerHTML = u.highlightedCode, r && r.call(u.element), n.hooks.run("after-highlight", u), n.hooks.run("complete", u) }, c.postMessage(JSON.stringify({ language: u.language, code: u.code, immediateClose: !0 })) } else u.highlightedCode = n.highlight(u.code, u.grammar, u.language), n.hooks.run("before-insert", u), u.element.innerHTML = u.highlightedCode, r && r.call(t), n.hooks.run("after-highlight", u), n.hooks.run("complete", u) }, highlight: function (e, t, r) { var l = n.tokenize(e, t); return a.stringify(n.util.encode(l), r) }, tokenize: function (e, t) { var a = n.Token, r = [e], l = t.rest; if (l) { for (var i in l) t[i] = l[i]; delete t.rest } e: for (var i in t) if (t.hasOwnProperty(i) && t[i]) { var o = t[i]; o = "Array" === n.util.type(o) ? o : [o]; for (var s = 0; s < o.length; ++s) { var u = o[s], c = u.inside, g = !!u.lookbehind, h = !!u.greedy, f = 0, d = u.alias; u = u.pattern || u; for (var p = 0; p < r.length; p++) { var m = r[p]; if (r.length > e.length) break e; if (!(m instanceof a)) { u.lastIndex = 0; var y = u.exec(m), v = 1; if (!y && h && p != r.length - 1) { var b = r[p + 1].matchedStr || r[p + 1], k = m + b; if (p < r.length - 2 && (k += r[p + 2].matchedStr || r[p + 2]), u.lastIndex = 0, y = u.exec(k), !y) continue; var w = y.index + (g ? y[1].length : 0); if (w >= m.length) continue; var _ = y.index + y[0].length, P = m.length + b.length; if (v = 3, P >= _) { if (r[p + 1].greedy) continue; v = 2, k = k.slice(0, P) } m = k } if (y) { g && (f = y[1].length); var w = y.index + f, y = y[0].slice(f), _ = w + y.length, S = m.slice(0, w), O = m.slice(_), j = [p, v]; S && j.push(S); var A = new a(i, c ? n.tokenize(y, c) : y, d, y, h); j.push(A), O && j.push(O), Array.prototype.splice.apply(r, j) } } } } } return r }, hooks: { all: {}, add: function (e, t) { var a = n.hooks.all; a[e] = a[e] || [], a[e].push(t) }, run: function (e, t) { var a = n.hooks.all[e]; if (a && a.length) for (var r, l = 0; r = a[l++];)r(t) } } }, a = n.Token = function (e, t, n, a, r) { this.type = e, this.content = t, this.alias = n, this.matchedStr = a || null, this.greedy = !!r }; if (a.stringify = function (e, t, r) { if ("string" == typeof e) return e; if ("Array" === n.util.type(e)) return e.map(function (n) { return a.stringify(n, t, e) }).join(""); var l = { type: e.type, content: a.stringify(e.content, t, r), tag: "span", classes: ["token", e.type], attributes: {}, language: t, parent: r }; if ("comment" == l.type && (l.attributes.spellcheck = "true"), e.alias) { var i = "Array" === n.util.type(e.alias) ? e.alias : [e.alias]; Array.prototype.push.apply(l.classes, i) } n.hooks.run("wrap", l); var o = ""; for (var s in l.attributes) o += (o ? " " : "") + s + '="' + (l.attributes[s] || "") + '"'; return "<" + l.tag + ' class="' + l.classes.join(" ") + '" ' + o + ">" + l.content + "</" + l.tag + ">" }, !_self.document) return _self.addEventListener ? (_self.addEventListener("message", function (e) { var t = JSON.parse(e.data), a = t.language, r = t.code, l = t.immediateClose; _self.postMessage(n.highlight(r, n.languages[a], a)), l && _self.close() }, !1), _self.Prism) : _self.Prism; var r = document.currentScript || [].slice.call(document.getElementsByTagName("script")).pop(); return r && (n.filename = r.src, document.addEventListener && !r.hasAttribute("data-manual") && document.addEventListener("DOMContentLoaded", n.highlightAll)), _self.Prism }(); "undefined" != typeof module && module.exports && (module.exports = Prism), "undefined" != typeof global && (global.Prism = Prism);
  </script>

  <script type="text/javascript">
    !function (e) { var t = { variable: [{ pattern: /\$?\(\([\w\W]+?\)\)/, inside: { variable: [{ pattern: /(^\$\(\([\w\W]+)\)\)/, lookbehind: !0 }, /^\$\(\(/], number: /\b-?(?:0x[\dA-Fa-f]+|\d*\.?\d+(?:[Ee]-?\d+)?)\b/, operator: /--?|-=|\+\+?|\+=|!=?|~|\*\*?|\*=|\/=?|%=?|<<=?|>>=?|<=?|>=?|==?|&&?|&=|\^=?|\|\|?|\|=|\?|:/, punctuation: /\(\(?|\)\)?|,|;/ } }, { pattern: /\$\([^)]+\)|`[^`]+`/, inside: { variable: /^\$\(|^`|\)$|`$/ } }, /\$(?:[a-z0-9_#\?\*!@]+|\{[^}]+\})/i] }; e.languages.bash = { shebang: { pattern: /^#!\s*\/bin\/bash|^#!\s*\/bin\/sh/, alias: "important" }, comment: { pattern: /(^|[^"{\\])#.*/, lookbehind: !0 }, string: [{ pattern: /((?:^|[^<])<<\s*)(?:"|')?(\w+?)(?:"|')?\s*\r?\n(?:[\s\S])*?\r?\n\2/g, lookbehind: !0, inside: t }, { pattern: /(["'])(?:\\\\|\\?[^\\])*?\1/g, inside: t }], variable: t.variable, "function": { pattern: /(^|\s|;|\||&)(?:alias|apropos|apt-get|aptitude|aspell|awk|basename|bash|bc|bg|builtin|bzip2|cal|cat|cd|cfdisk|chgrp|chmod|chown|chroot|chkconfig|cksum|clear|cmp|comm|command|cp|cron|crontab|csplit|cut|date|dc|dd|ddrescue|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|du|egrep|eject|enable|env|ethtool|eval|exec|expand|expect|export|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|getopts|git|grep|groupadd|groupdel|groupmod|groups|gzip|hash|head|help|hg|history|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|jobs|join|kill|killall|less|link|ln|locate|logname|logout|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|make|man|mkdir|mkfifo|mkisofs|mknod|more|most|mount|mtools|mtr|mv|mmv|nano|netstat|nice|nl|nohup|notify-send|nslookup|open|op|passwd|paste|pathchk|ping|pkill|popd|pr|printcap|printenv|printf|ps|pushd|pv|pwd|quota|quotacheck|quotactl|ram|rar|rcp|read|readarray|readonly|reboot|rename|renice|remsync|rev|rm|rmdir|rsync|screen|scp|sdiff|sed|seq|service|sftp|shift|shopt|shutdown|sleep|slocate|sort|source|split|ssh|stat|strace|su|sudo|sum|suspend|sync|tail|tar|tee|test|time|timeout|times|touch|top|traceroute|trap|tr|tsort|tty|type|ulimit|umask|umount|unalias|uname|unexpand|uniq|units|unrar|unshar|uptime|useradd|userdel|usermod|users|uuencode|uudecode|v|vdir|vi|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yes|zip)(?=$|\s|;|\||&)/, lookbehind: !0 }, keyword: { pattern: /(^|\s|;|\||&)(?:let|:|\.|if|then|else|elif|fi|for|break|continue|while|in|case|function|select|do|done|until|echo|exit|return|set|declare)(?=$|\s|;|\||&)/, lookbehind: !0 }, "boolean": { pattern: /(^|\s|;|\||&)(?:true|false)(?=$|\s|;|\||&)/, lookbehind: !0 }, operator: /&&?|\|\|?|==?|!=?|<<<?|>>|<=?|>=?|=~/, punctuation: /\$?\(\(?|\)\)?|\.\.|[{}[\];]/ }; var a = t.variable[1].inside; a["function"] = e.languages.bash["function"], a.keyword = e.languages.bash.keyword, a.boolean = e.languages.bash.boolean, a.operator = e.languages.bash.operator, a.punctuation = e.languages.bash.punctuation }(Prism);
  </script>

  <script type="text/javascript">
    Prism.languages.yaml = { scalar: { pattern: /([\-:]\s*(![^\s]+)?[ \t]*[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)[^\r\n]+(?:\3[^\r\n]+)*)/, lookbehind: !0, alias: "string" }, comment: /#.*/, key: { pattern: /(\s*[:\-,[{\r\n?][ \t]*(![^\s]+)?[ \t]*)[^\r\n{[\]},#]+?(?=\s*:\s)/, lookbehind: !0, alias: "atrule" }, directive: { pattern: /(^[ \t]*)%.+/m, lookbehind: !0, alias: "important" }, datetime: { pattern: /([:\-,[{]\s*(![^\s]+)?[ \t]*)(\d{4}-\d\d?-\d\d?([tT]|[ \t]+)\d\d?:\d{2}:\d{2}(\.\d*)?[ \t]*(Z|[-+]\d\d?(:\d{2})?)?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(:\d{2}(\.\d*)?)?)(?=[ \t]*($|,|]|}))/m, lookbehind: !0, alias: "number" }, "boolean": { pattern: /([:\-,[{]\s*(![^\s]+)?[ \t]*)(true|false)[ \t]*(?=$|,|]|})/im, lookbehind: !0, alias: "important" }, "null": { pattern: /([:\-,[{]\s*(![^\s]+)?[ \t]*)(null|~)[ \t]*(?=$|,|]|})/im, lookbehind: !0, alias: "important" }, string: { pattern: /([:\-,[{]\s*(![^\s]+)?[ \t]*)("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')(?=[ \t]*($|,|]|}))/m, lookbehind: !0 }, number: { pattern: /([:\-,[{]\s*(![^\s]+)?[ \t]*)[+\-]?(0x[\da-f]+|0o[0-7]+|(\d+\.?\d*|\.?\d+)(e[\+\-]?\d+)?|\.inf|\.nan)[ \t]*(?=$|,|]|})/im, lookbehind: !0 }, tag: /![^\s]+/, important: /[&*][\w]+/, punctuation: /---|[:[\]{}\-,|>?]|\.\.\./ };
  </script>

  <script type="text/javascript">
    !function () { if ("undefined" != typeof self && self.Prism && self.document) { var e = { html: "HTML", xml: "XML", svg: "SVG", mathml: "MathML", css: "CSS", clike: "C-like", javascript: "JavaScript", abap: "ABAP", actionscript: "ActionScript", apacheconf: "Apache Configuration", apl: "APL", applescript: "AppleScript", asciidoc: "AsciiDoc", aspnet: "ASP.NET (C#)", autoit: "AutoIt", autohotkey: "AutoHotkey", basic: "BASIC", csharp: "C#", cpp: "C++", coffeescript: "CoffeeScript", "css-extras": "CSS Extras", fsharp: "F#", glsl: "GLSL", http: "HTTP", inform7: "Inform 7", json: "JSON", latex: "LaTeX", lolcode: "LOLCODE", matlab: "MATLAB", mel: "MEL", nasm: "NASM", nginx: "nginx", nsis: "NSIS", objectivec: "Objective-C", ocaml: "OCaml", parigp: "PARI/GP", php: "PHP", "php-extras": "PHP Extras", powershell: "PowerShell", jsx: "React JSX", rest: "reST (reStructuredText)", sas: "SAS", sass: "Sass (Sass)", scss: "Sass (Scss)", sql: "SQL", typescript: "TypeScript", vhdl: "VHDL", vim: "vim", wiki: "Wiki markup", yaml: "YAML" }; Prism.hooks.add("before-highlight", function (s) { var a = s.element.parentNode; if (a && /pre/i.test(a.nodeName)) { var t, i, r = a.getAttribute("data-language") || e[s.language] || s.language.substring(0, 1).toUpperCase() + s.language.substring(1), l = a.previousSibling; l && /\s*\bprism-show-language\b\s*/.test(l.className) && l.firstChild && /\s*\bprism-show-language-label\b\s*/.test(l.firstChild.className) ? i = l.firstChild : (t = document.createElement("div"), i = document.createElement("div"), i.className = "prism-show-language-label", t.className = "prism-show-language", t.appendChild(i), a.parentNode.insertBefore(t, a)), i.innerHTML = r } }) } }();
  </script>

  <script type="text/x-mathjax-config">
(function () {

MathJax.Hub.Config({
	'showProcessingMessages': false,
	'messageStyle': 'none'
});

if (typeof MathJaxListener !== 'undefined') {
	MathJax.Hub.Register.StartupHook('End', function () {
		MathJaxListener.invokeCallbackForKey_('End');
	});
}

})();
</script>

  <script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


</body>

</html>